import { VueRouter } from 'vue-router/types/router';
import { Loading } from 'element-ui';
import { SucConfirm } from '../suc-confirm';
import { SucMessage } from '../suc-message';
import { SucNotice } from '../suc-notice';
import { SucLoadingBar } from '../loading-bar';

function utils(Vue: any, {router}: { router?: VueRouter }) {
    Vue.use(Loading);
    Vue.prototype.$SucConfirm = SucConfirm;
    Vue.prototype.$SucMessage = SucMessage;
    Vue.prototype.$SucNotice = SucNotice;
    if (router && router.beforeEach && router.afterEach) {
        router.beforeEach((to, from, next) => {
            SucLoadingBar.start();
            next();
        });
        router.afterEach(route => {
            SucLoadingBar.finish();
        });
    }

}

export default utils;
export {
    utils,
};