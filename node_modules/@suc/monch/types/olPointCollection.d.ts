import { VNode } from 'vue';
import { StyleLike } from './style';
import type VectorSource from 'ol/source/Vector';
import {VectorLayer} from './vectorLayer';

export interface CollectionPointInterface {
    id: string,
    coords: number[],
    name?: string  // 点位名称
}

export interface CollectionEventInterface {
    coords: number[],
    projection: string,
    featureInfo: { type: 'collection', data: CollectionPointInterface },
    mulPathInfo: CollectionPointInterface
}

export interface FitDataInterface {
    center: number[],  // 坐标，坐标系和组件的projection属性一致
    zoom: number   // 缩放层级
}

export declare class OlPointCollection extends VectorLayer {
    /**
     * 点位集合
     * @default []
     */
    points?: Array<CollectionPointInterface>;
    /**
     * 图层悬浮样式
     */
    moveStyle?: StyleLike;
    /**
     * 图层选中样式
     */
    clickStyle?: StyleLike;
    /**
     * 是否只加载可见视图内的点位;在快速刷新点位的情境下适用，并且点位数量不能太大（几千？）
     * @default false
     */
    onlyVisible?: boolean;
    /**
     * 选中点位的id 双向绑定
     */
    selectPointId?: string | number;
    /**
     * 鼠标悬浮显示name字段 默认不显示
     * @default false
     */
    nameOverLabel?: boolean;
    /**
     * 点击空白处是否设置 selectFeature=null，进而关闭相关 overlay
     * @default true
     */
    blankClear?: boolean;
    /**
     * 输入输出数据采用的坐标系
     * @default EPSG:4326
     */
    projection?: string;

    /**
     * 选中点位更新时触发
     */
    $emit(eventName: 'update:selectPointId', id: string): this;
    /**
     * 图层是否在初始化时自适应屏幕后触发
     * @param e 当前视图中心坐标与缩放层级
     */
    $emit(eventName: 'fit', e: FitDataInterface): this;
    /**
     * 点位加载完触发
     */
    $emit(eventName: 'load-finished', e: { source: VectorSource }): this;

    /**
     * 鼠标悬浮在矢量图层时触发
     */
    $emit(eventName: 'pointermove', moveFeature: CollectionEventInterface): this;
    /**
     * 鼠标点击矢量图层时触发
     */
    $emit(eventName: 'singleclick', selectFeature: CollectionEventInterface): this;

    /**
     * 作用域插槽
     */
    $scopedSlots: {
        'default': (props: { moveFeature: CollectionEventInterface|null, selectFeature: CollectionEventInterface|null }) => VNode[]
    };
}
