import Vue, { VNode } from 'vue';
import {StyleLike} from './style';

export interface OlLayerOptions {
    name: string,
    type?: string,   // 图层类型, 常用有 "Graticule"|"Heatmap"|"FormatVector"
    source?: {  // Graticule 图层不用数据源
        type: string,
        url?: string,
        [key:string]: any
    },
    opacity?: number,  // 图层透明度
    visible?: boolean,  // 图层可见性
    [key:string]: any
}

export interface EventInfoInterface {
    coords:number[],    // 事件发生处的坐标
    projection: 'EPSG:4326'|'pixel'|'xkcd-image',  // 坐标的坐标系
    [key:string]: any   // 矢量上携带的属性
}

export declare class OlLayer extends Vue {
    /**
     * 图层配置项，默认值为外网百度地图的配置
     */
    options?: OlLayerOptions;
    /**
     * 图层样式
     */
    layerStyle?: StyleLike;
    /**
     * 图层悬浮样式
     */
    moveStyle?: StyleLike;
    /**
     * 图层选中样式
     */
    clickStyle?: StyleLike;
    /**
     * 鼠标悬浮显示name字段 默认不显示
     * @default false
     */
    nameOverLabel?: boolean;
    /**
     * 点击空白处是否设置 selectFeature=null，进而关闭相关 overlay
     * @default true
     */
    blankClear?: boolean;
    /**
     * 用于 arcgis 服务的图层筛选，具体配置可查阅 https://developers.arcgis.com/rest/services-reference/export-map.htm
     */
    params?: object;
    /**
     * 鼠标悬浮在矢量图层时触发
     */
    $emit(eventName: 'pointermove', moveFeature: EventInfoInterface): this;
    /**
     * 鼠标点击矢量图层时触发
     */
    $emit(eventName: 'singleclick', selectFeature: EventInfoInterface): this;

    /**
     * 作用域插槽
     */
    $scopedSlots: {
        'default': (props:{moveFeature: EventInfoInterface|null, selectFeature: EventInfoInterface|null}) => VNode[]
    }
}
