import Vue from "vue";
import {AttributionLike} from 'ol/source/Source';
import VectorSource, {LoadingStrategy} from 'ol/source/Vector';
import {FeatureLoader, FeatureUrlFunction} from "ol/featureloader";
import {StyleLike} from "./style";
import Feature from "ol/Feature";

export interface LoadEndData {
    source: VectorSource,
    features: Feature[]
}

export interface LoadErrorData {
    source: VectorSource,
    msg: string
}

export declare class OlVectorSource extends Vue {
    attributions?: AttributionLike;
    format?: string;
    formatOptions?:any;
    loader?: FeatureLoader;
    overlaps?: boolean;
    strategy?: LoadingStrategy;
    url?: string | FeatureUrlFunction;
    local?: boolean;
    jsonObject?: any; // 直接传json对象，例如：{geojson: { object: {}, projection: "EPSG:3857"}}
    useSpatialIndex?: boolean;
    wrapX?: boolean;
    featureStyle?: StyleLike;

    /**
     * 矢量加载完毕时触发
     */
    $emit(eventName: 'loadend', data: LoadEndData): this;

    /**
     * 矢量加载失败时触发
     */
    $emit(eventName: 'loaderror', data: LoadErrorData): this;
}
