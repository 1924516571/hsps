import Vue, { VNode } from 'vue';
import { StyleLike } from './style';
import VectorSource from 'ol/source/Vector';
import {CoordinateType} from "./olPath";
import {VectorLayer} from "./vectorLayer";

export interface PathInerface {
    id: string,
    name?: string,
    type: string,
    coords: CoordinateType
}

export interface MulPathEventInterface {
    coords: CoordinateType,
    projection: string,
    featureInfo: { type: 'collection', data: PathInerface },
    mulPathInfo: PathInerface
}

export interface FitDataInterface {
    center: number[],  // 坐标，坐标系和组件的projection属性一致
    zoom: number   // 缩放层级
}

export declare class OlMulPath extends VectorLayer {
    /**
     * 矢量集合
     * @default []
     */
    grids?: Array<PathInerface>;
    /**
     * 图层是否在初始化时自适应屏幕
     * @default false
     */
    isFit?: boolean;
    /**
     * 图层id 可通过 layer.get('id') 获取
     */
    layerId?: string;
    /**
     * 图层样式
     */
    layerStyle?: StyleLike;
    /**
     * 图层悬浮样式
     */
    moveStyle?: StyleLike;
    /**
     * 图层选中样式
     */
    clickStyle?: StyleLike;
    /**
     * 图层渲染方式 'image' 性能更好，但是地图缩放动画时图标和文字也会缩放
     * @default vector
     */
    renderMode?: 'vector' | 'image';
    /**
     * 选中的矢量的id 双向绑定
     */
    selectFeatureId?: string | number;
    /**
     * Declutter images and text.
     * Decluttering is applied to all image and text styles of all Vector and VectorTile layers that have set this to true.
     * The priority is defined by the z-index of the layer, the zIndex of the style and the render order of features.
     * Higher z-index means higher priority.
     * Within the same z-index, a feature rendered before another has higher priority.
     * @default false
     */
    declutter?: boolean;
    /**
     * 鼠标悬浮显示name字段 默认不显示
     * @default false
     */
    nameOverLabel?: boolean;
    /**
     * 点击空白处是否设置 selectFeature=null，进而关闭相关 overlay
     * @default true
     */
    blankClear?: boolean;
    /**
     * 图层层级
     * @default 0
     */
    zIndex?: number;
    /**
     * 输入输出数据采用的坐标系
     * @default EPSG:4326
     */
    projection?: string;

    /**
     * 选中矢量更新时触发
     */
    $emit(eventName: 'update:selectFeatureId', id: string): this;
    /**
     * 图层是否在初始化时自适应屏幕后触发
     * @param e 当前视图中心坐标与缩放层级
     */
    $emit(eventName: 'fit', e: FitDataInterface): this;
    /**
     * 点位加载完触发
     */
    $emit(eventName: 'load-finished', e: { source: VectorSource }): this;

    /**
     * 鼠标悬浮在矢量图层时触发
     */
    $emit(eventName: 'pointermove', moveFeature: MulPathEventInterface): this;
    /**
     * 鼠标点击矢量图层时触发
     */
    $emit(eventName: 'singleclick', selectFeature: MulPathEventInterface): this;

    /**
     * 作用域插槽
     */
    $scopedSlots: {
        'default': (props: { moveFeature: MulPathEventInterface|null, selectFeature: MulPathEventInterface|null }) => VNode[]
    };
}
